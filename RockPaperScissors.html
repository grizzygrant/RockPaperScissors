<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div id="buttons">
        <button class="button" id="rock">Rock</button>
        <button class="button" id="paper">Paper</button>
        <button class="button" id="scissors">Scissors</button>
    </div>
    <!--Hide until playRound()-->
    <div id="output" class="hidden">
        <!--Add Round Indicator, Score, Each player selection, and round winner-->
        <p id="round-winner"></p>
        <p id="selections"></p>
        <p id="score"></p>
        <p id="round"></p>
    </div>
    <script>
        //Add event listener to buttons to call playRound() with correct player selection
        //Change console.log's to DOM methods
        //Display running score
        //declareWinner() after 5 points and append to HTML
        //For bonus, allow a selection for # of rounds

        //Declare Variables
        let playerScore = 0;
        let computerScore = 0;
        let currentRound = 0;
        let playerSelection = "";
        let computerSelection = "";
        let winner = "";
        const roundWinnerP = document.querySelector('#round-winner')
        const selectionsP = document.querySelector('#selections');
        const scoreP = document.querySelector('#score');
        const roundP = document.querySelector('#round');
        const buttons = document.querySelector('#buttons');
        const rockButton = document.querySelector('#rock');
        const paperButton = document.querySelector('#paper');
        const scissorsButton = document.querySelector('#scissors');
        //Get 'Computer Choice'
        //Return random number 0-2
        function getComputerChoice() {
            let computerChoiceNum = Math.floor(Math.random() * 3);
            let computerChoice = "";
            switch (computerChoiceNum) {
                case 0:
                    computerChoice = 'rock';
                    break;
                case 1: 
                    computerChoice = 'paper';
                    break;
                case 2: 
                    computerChoice = 'scissors';
                    break;
                default:
                    computerChoice = 'ERROR???';
            }
            return computerChoice;
        }
        //Display choices, score, and round
        //Replace with textContent changes
        function displayRoundInfo() {
            selectionsP.textContent = `The computer chose: ${computerSelection}. You chose: ${playerSelection}.`;
            scoreP.textContent = `Computer: ${computerScore}  Player: ${playerScore}`;
            roundP.textContent = `Round: ${currentRound}`;
            console.log("Computer: " + computerSelection + "; Your choice: " + playerSelection);
            console.log("Computer score: " + computerScore + "; Player score: " + playerScore + "; Current round: " + currentRound);
        }
        // Play round of RPS and determine round winner
        //Increments score +1 --- Remove 'currentRound += 1' from if statement scope to function scope
        function playRound(playerSelection, computerSelection) {
            if (playerSelection === computerSelection) {
                console.log("You have tied. Play again!");
            } else if (playerSelection === 'rock' && computerSelection === 'scissors') {
                console.log('You won! Rock beats scissors.');
                playerScore += 1;
            } else if (playerSelection === 'rock' && computerSelection === 'paper') {
                console.log('You lose. Paper beats rock.');
                computerScore += 1;
            } else if (playerSelection === 'scissors' && computerSelection === 'paper') {
                console.log('You won! Scissors cuts paper.');
                playerScore += 1;
            } else if (playerSelection === 'scissors' && computerSelection === 'rock') {
                console.log('You lose. Rock beats scissors.');
                computerScore += 1;
            } else if (playerSelection === 'paper' && computerSelection === 'rock') {
                console.log('You won! Paper beats rock.');
                playerScore += 1;
            } else if (playerSelection === 'paper' && computerSelection === 'scissors') {
                console.log('You lose. Scissors cuts paper.');
                computerScore += 1;
            } else {
                console.log('What happened? ERROR!');
            }  
            currentRound += 1;
            //Call this separately from playRound() ??
            displayRoundInfo();
        }
        //Declare winner
        function declareWinner() {
            if (playerScore === computerScore) {
                winner = "No one";
                console.log(`${winner} is the winner. You have tied.`);
            } else if (playerScore > computerScore) {
                winner = "Player";
                console.log("You are the winner! Suck it stupid computers.");
            } else if (computerScore > playerScore) {
                winner = "Computer";
                console.log("The computer wins. They'll probably take our jobs soon.");
            }
        }
        //Play Game - PlayerSelection > Computer Selection > playRound() 
        function playGame() {
            //Round 1
            playerSelection = prompt("Welcome to ROCK PAPER SCISSORS. Enter your move: Rock, Paper, or Scissors.");
            playerSelection = playerSelection.toLowerCase();
            computerSelection = getComputerChoice();
            playRound(playerSelection, computerSelection);
            //Round 2
            playerSelection = prompt("Next round. Enter your move: Rock Paper or Scissors.");
            playerSelection = playerSelection.toLowerCase();
            computerSelection = getComputerChoice();
            playRound(playerSelection, computerSelection);
            //Round 3
            playerSelection = prompt("Next round. Enter your move: Rock Paper or Scissors.");
            playerSelection = playerSelection.toLowerCase();
            computerSelection = getComputerChoice();
            playRound(playerSelection, computerSelection);
            //Round 4
            playerSelection = prompt("Next round. Enter your move: Rock Paper or Scissors.");
            playerSelection = playerSelection.toLowerCase();
            computerSelection = getComputerChoice();
            playRound(playerSelection, computerSelection);
            //Round 5
            playerSelection = prompt("Next round. Enter your move: Rock Paper or Scissors.");
            playerSelection = playerSelection.toLowerCase();
            computerSelection = getComputerChoice();
            playRound(playerSelection, computerSelection);
            //Declare winner
            declareWinner();
        }
        //Add event listeners
        rock.addEventListener('click', () => {
            if (currentRound < 5) {
                playRound('rock', getComputerChoice());
            } else {
                declareWinner();
            }
        });
        paper.addEventListener('click', () => {
            if (currentRound < 5) {
                playRound('paper', getComputerChoice());
            } else {
                declareWinner();
            }
        });
        scissors.addEventListener('click', () => {
            if (currentRound < 5) {
                playRound('scissors', getComputerChoice());
            } else {
                declareWinner();
            }
        });
    </script>
</body>
</html>